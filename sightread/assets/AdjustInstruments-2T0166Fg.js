import{c as m,a as j,u as k}from"./Dropdown-B9h-t97s.js";import{p as e,a as C}from"./chunk-PVWAREVJ-BeAWct5i.js";import{c as h,R as b,S as v,j as w,u as N,f as Z,d as S}from"./context-kPolJz0x.js";import"./Canvas-C5qiJpk2.js";import{u as P,P as T,a as R,g as _}from"./SongVisualizer-BApS7ggG.js";function z({width:t,height:n,style:s,className:a,onClick:o,fill:i}){return e.jsxs("svg",{width:t,height:n,style:s,className:a,onClick:o,viewBox:"0 0 23 26",children:[e.jsx("path",{d:"M2.875 7.04688C3.90625 7 4.75 7.89062 4.75 8.92188V13H5.125V4.75C5.125 3.71875 6.01562 2.82812 7.04688 2.875C8.07812 2.875 8.875 3.71875 8.875 4.70312V13H9.25V2.92188C9.25 1.89062 10.1406 1 11.1719 1.04688C12.2031 1.04688 13 1.89062 13 2.875V13H13.375V4.79688C13.375 3.76562 14.2656 2.875 15.2969 2.92188C16.3281 2.92188 17.125 3.76562 17.125 4.75V15.8125L18.625 13.7969C19.2344 12.9531 20.4062 12.7656 21.25 13.375C22.0938 13.9844 22.2812 15.1562 21.6719 16L15.7656 24.1094C15.3906 24.6719 14.6875 25 13.9375 25H4.70312C3.67188 25 2.73438 24.2969 2.5 23.2656L1.28125 18.0156C1.09375 17.3594 1.04688 16.6562 1.04688 15.9531V8.875C1 7.89062 1.84375 7.04688 2.875 7.04688Z",className:i}),e.jsx("path",{d:"M2.875 7.04688L2.8977 7.54636L2.88636 7.54688H2.875V7.04688ZM4.75 13V13.5H4.25V13H4.75ZM5.125 13H5.625V13.5H5.125V13ZM7.04688 2.875V3.375H7.03552L7.02417 3.37448L7.04688 2.875ZM8.875 13V13.5H8.375V13H8.875ZM9.25 13H9.75V13.5H9.25V13ZM11.1719 1.04688V1.54688H11.1605L11.1492 1.54636L11.1719 1.04688ZM13 13V13.5H12.5V13H13ZM13.375 13H13.875V13.5H13.375V13ZM15.2969 2.92188V3.42188H15.2855L15.2742 3.42136L15.2969 2.92188ZM17.125 15.8125L17.5261 16.111L16.625 17.3219V15.8125H17.125ZM18.625 13.7969L19.0304 14.0897L19.0261 14.0954L18.625 13.7969ZM21.6719 16L22.0772 16.2927L22.076 16.2944L21.6719 16ZM15.7656 24.1094L15.3496 23.832L15.3554 23.8234L15.3615 23.815L15.7656 24.1094ZM2.5 23.2656L2.98705 23.1526L2.98757 23.1548L2.5 23.2656ZM1.28125 18.0156L1.76201 17.8783L1.76546 17.8903L1.7683 17.9026L1.28125 18.0156ZM1.04688 8.875L1.54631 8.85122L1.54688 8.8631V8.875H1.04688ZM2.8523 6.54739C4.19798 6.48622 5.25 7.63618 5.25 8.92188H4.25C4.25 8.14507 3.61452 7.51378 2.8977 7.54636L2.8523 6.54739ZM5.25 8.92188V13H4.25V8.92188H5.25ZM4.75 12.5H5.125V13.5H4.75V12.5ZM4.625 13V4.75H5.625V13H4.625ZM4.625 4.75C4.625 3.4476 5.73987 2.31507 7.06958 2.37552L7.02417 3.37448C6.29138 3.34118 5.625 3.9899 5.625 4.75H4.625ZM7.04688 2.375C8.36257 2.375 9.375 3.45099 9.375 4.70312H8.375C8.375 3.98651 7.79368 3.375 7.04688 3.375V2.375ZM9.375 4.70312V13H8.375V4.70312H9.375ZM8.875 12.5H9.25V13.5H8.875V12.5ZM8.75 13V2.92188H9.75V13H8.75ZM8.75 2.92188C8.75 1.61947 9.86487 0.486949 11.1946 0.547391L11.1492 1.54636C10.4164 1.51305 9.75 2.16178 9.75 2.92188H8.75ZM11.1719 0.546875C12.4876 0.546875 13.5 1.62286 13.5 2.875H12.5C12.5 2.15839 11.9187 1.54688 11.1719 1.54688V0.546875ZM13.5 2.875V13H12.5V2.875H13.5ZM13 12.5H13.375V13.5H13V12.5ZM12.875 13V4.79688H13.875V13H12.875ZM12.875 4.79688C12.875 3.49447 13.9899 2.36195 15.3196 2.42239L15.2742 3.42136C14.5414 3.38805 13.875 4.03678 13.875 4.79688H12.875ZM15.2969 2.42188C16.6126 2.42188 17.625 3.49786 17.625 4.75H16.625C16.625 4.03339 16.0437 3.42188 15.2969 3.42188V2.42188ZM17.625 4.75V15.8125H16.625V4.75H17.625ZM16.7239 15.514L18.2239 13.4984L19.0261 14.0954L17.5261 16.111L16.7239 15.514ZM18.2197 13.5041C18.9911 12.4359 20.4757 12.199 21.5427 12.9697L20.9573 13.7803C20.3368 13.3322 19.4776 13.4703 19.0303 14.0896L18.2197 13.5041ZM21.5427 12.9697C22.611 13.7411 22.8478 15.2257 22.0772 16.2927L21.2665 15.7073C21.7147 15.0868 21.5765 14.2276 20.9573 13.7803L21.5427 12.9697ZM22.076 16.2944L16.1698 24.4037L15.3615 23.815L21.2677 15.7056L22.076 16.2944ZM16.1817 24.3867C15.6967 25.1141 14.8211 25.5 13.9375 25.5V24.5C14.5539 24.5 15.0845 24.2297 15.3496 23.832L16.1817 24.3867ZM13.9375 25.5H4.70312V24.5H13.9375V25.5ZM4.70312 25.5C3.45017 25.5 2.3011 24.6466 2.01243 23.3764L2.98757 23.1548C3.16765 23.9472 3.89358 24.5 4.70312 24.5V25.5ZM2.01295 23.3787L0.794201 18.1287L1.7683 17.9026L2.98705 23.1526L2.01295 23.3787ZM0.800488 18.153C0.594179 17.4309 0.546875 16.6738 0.546875 15.9531H1.54688C1.54688 16.6387 1.59332 17.2878 1.76201 17.8783L0.800488 18.153ZM0.546875 15.9531V8.875H1.54688V15.9531H0.546875ZM0.547441 8.89878C0.485907 7.60655 1.58151 6.54688 2.875 6.54688V7.54688C2.10599 7.54688 1.51409 8.1747 1.54631 8.85122L0.547441 8.89878Z"})]})}function O({width:t,height:n,style:s,className:a,onClick:o,fill:i}){return e.jsxs("svg",{width:t,height:n,style:s,className:a,onClick:o,viewBox:"0 0 23 26",children:[e.jsx("path",{d:"M20.125 7.04688C19.0938 7 18.25 7.89062 18.25 8.92188V13H17.875V4.75C17.875 3.71875 16.9844 2.82812 15.9531 2.875C14.9219 2.875 14.125 3.71875 14.125 4.70312V13H13.75V2.92188C13.75 1.89062 12.8594 1 11.8281 1.04688C10.7969 1.04688 10 1.89062 10 2.875V13H9.625V4.79688C9.625 3.76562 8.73438 2.875 7.70312 2.92188C6.67188 2.92188 5.875 3.76562 5.875 4.75V15.8125L4.375 13.7969C3.76562 12.9531 2.59375 12.7656 1.75 13.375C0.90625 13.9844 0.71875 15.1562 1.32812 16L7.23438 24.1094C7.60938 24.6719 8.3125 25 9.0625 25H18.2969C19.3281 25 20.2656 24.2969 20.5 23.2656L21.7188 18.0156C21.9062 17.3594 21.9531 16.6562 21.9531 15.9531V8.875C22 7.89062 21.1562 7.04688 20.125 7.04688Z",className:i}),e.jsx("path",{d:"M20.125 7.04688L20.1023 7.54636L20.1136 7.54688H20.125V7.04688ZM18.25 13V13.5H18.75V13H18.25ZM17.875 13H17.375V13.5H17.875V13ZM15.9531 2.875V3.375H15.9645L15.9758 3.37448L15.9531 2.875ZM14.125 13V13.5H14.625V13H14.125ZM13.75 13H13.25V13.5H13.75V13ZM11.8281 1.04688V1.54688H11.8395L11.8508 1.54636L11.8281 1.04688ZM10 13V13.5H10.5V13H10ZM9.625 13H9.125V13.5H9.625V13ZM7.70312 2.92188V3.42188H7.71448L7.72583 3.42136L7.70312 2.92188ZM5.875 15.8125L5.47388 16.111L6.375 17.3219V15.8125H5.875ZM4.375 13.7969L3.96962 14.0897L3.97388 14.0954L4.375 13.7969ZM1.32812 16L0.922782 16.2927L0.923959 16.2944L1.32812 16ZM7.23438 24.1094L7.6504 23.832L7.64465 23.8234L7.63854 23.815L7.23438 24.1094ZM20.5 23.2656L20.0129 23.1526L20.0124 23.1548L20.5 23.2656ZM21.7188 18.0156L21.238 17.8783L21.2345 17.8903L21.2317 17.9026L21.7188 18.0156ZM21.9531 8.875L21.4537 8.85122L21.4531 8.8631V8.875H21.9531ZM20.1477 6.54739C18.802 6.48622 17.75 7.63618 17.75 8.92188H18.75C18.75 8.14507 19.3855 7.51378 20.1023 7.54636L20.1477 6.54739ZM17.75 8.92188V13H18.75V8.92188H17.75ZM18.25 12.5H17.875V13.5H18.25V12.5ZM18.375 13V4.75H17.375V13H18.375ZM18.375 4.75C18.375 3.4476 17.2601 2.31507 15.9304 2.37552L15.9758 3.37448C16.7086 3.34118 17.375 3.9899 17.375 4.75H18.375ZM15.9531 2.375C14.6374 2.375 13.625 3.45099 13.625 4.70312H14.625C14.625 3.98651 15.2063 3.375 15.9531 3.375V2.375ZM13.625 4.70312V13H14.625V4.70312H13.625ZM14.125 12.5H13.75V13.5H14.125V12.5ZM14.25 13V2.92188H13.25V13H14.25ZM14.25 2.92188C14.25 1.61947 13.1351 0.486949 11.8054 0.547391L11.8508 1.54636C12.5836 1.51305 13.25 2.16178 13.25 2.92188H14.25ZM11.8281 0.546875C10.5124 0.546875 9.5 1.62286 9.5 2.875H10.5C10.5 2.15839 11.0813 1.54688 11.8281 1.54688V0.546875ZM9.5 2.875V13H10.5V2.875H9.5ZM10 12.5H9.625V13.5H10V12.5ZM10.125 13V4.79688H9.125V13H10.125ZM10.125 4.79688C10.125 3.49447 9.01013 2.36195 7.68042 2.42239L7.72583 3.42136C8.45862 3.38805 9.125 4.03678 9.125 4.79688H10.125ZM7.70312 2.42188C6.38743 2.42188 5.375 3.49786 5.375 4.75H6.375C6.375 4.03339 6.95632 3.42188 7.70312 3.42188V2.42188ZM5.375 4.75V15.8125H6.375V4.75H5.375ZM6.27612 15.514L4.77612 13.4984L3.97388 14.0954L5.47388 16.111L6.27612 15.514ZM4.78034 13.5041C4.00886 12.4359 2.52427 12.199 1.45725 12.9697L2.04275 13.7803C2.66323 13.3322 3.52239 13.4703 3.96966 14.0896L4.78034 13.5041ZM1.45725 12.9697C0.389049 13.7411 0.15216 15.2257 0.922785 16.2927L1.73346 15.7073C1.28534 15.0868 1.42345 14.2276 2.04275 13.7803L1.45725 12.9697ZM0.923959 16.2944L6.83021 24.4037L7.63854 23.815L1.73229 15.7056L0.923959 16.2944ZM6.81835 24.3867C7.30326 25.1141 8.17887 25.5 9.0625 25.5V24.5C8.44613 24.5 7.91549 24.2297 7.6504 23.832L6.81835 24.3867ZM9.0625 25.5H18.2969V24.5H9.0625V25.5ZM18.2969 25.5C19.5498 25.5 20.6989 24.6466 20.9876 23.3764L20.0124 23.1548C19.8324 23.9472 19.1064 24.5 18.2969 24.5V25.5ZM20.987 23.3787L22.2058 18.1287L21.2317 17.9026L20.013 23.1526L20.987 23.3787ZM22.1995 18.153C22.4058 17.4309 22.4531 16.6738 22.4531 15.9531H21.4531C21.4531 16.6387 21.4067 17.2878 21.238 17.8783L22.1995 18.153ZM22.4531 15.9531V8.875H21.4531V15.9531H22.4531ZM22.4526 8.89878C22.5141 7.60655 21.4185 6.54688 20.125 6.54688V7.54688C20.894 7.54688 21.4859 8.1747 21.4537 8.85122L22.4526 8.89878Z"})]})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],A=m("chevron-down",q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$=m("loader",E);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],B=m("refresh-ccw",D);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],h1=m("refresh-cw",X);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],I=m("volume-2",F);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],W=m("volume-x",U);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],J=m("x",G);function g(){document.body.style.overflow="initial"}function K(){document.body.style.overflow="hidden"}function p1({show:t,children:n,onClose:s,className:a}){const o=C.useRef(null);return j(()=>s?.(),o),k("keydown",i=>{t&&i.key==="Escape"&&s?.()}),C.useEffect(()=>(t?K():g(),g),[t]),t?e.jsx("div",{className:"fixed top-0 left-0 z-20 flex h-full w-full items-center justify-center overflow-auto bg-gray-400/60 md:p-10",children:e.jsxs("div",{ref:o,className:h(a,"relative z-10 m-auto max-w-(--breakpoint-lg) overflow-hidden rounded-md bg-white"),children:[e.jsx("button",{className:"text-purple-primary hover:text-purple-hover absolute top-5 right-5 z-10",onClick:s,children:e.jsx(J,{height:24,width:24})}),n]})}):null}function Q({value:t,options:n,onChange:s,loading:a,error:o,className:i,format:M=u=>u,display:x=u=>u}){const[u,p]=C.useState(!1),L=C.useRef(null),V=()=>{p(!u)},r=l=>{s(l),V()};return j(()=>p(!1),L),e.jsxs("div",{className:h(i,"relative inline-block w-full text-black",o&&"border border-red-600"),children:[e.jsx("input",{value:a?"":x(t),type:"text",className:h("max-h-full w-full cursor-pointer rounded-md border border-gray-200 bg-white p-2","hover:border-purple-primary focus:border-purple-primary hover:border focus:outline-hidden"),onClick:l=>{l.stopPropagation(),V()},readOnly:!0}),e.jsx(A,{width:15,height:15,className:h("absolute top-1/2 right-1 -translate-y-1/2 cursor-pointer transition",u&&"rotate-180"),onClick:l=>{l.stopPropagation(),V()}}),a&&e.jsx("div",{className:"pointer-events-none absolute top-0 grid h-full w-full place-items-center",children:e.jsx($,{size:24,height:24,className:"text-purple-primary animate-spin"})}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-0 z-10 w-full",children:e.jsx("div",{ref:L,className:h("border-purple-primary h-full max-h-[250px] w-full overflow-y-auto rounded-md border bg-white transition",u?"":"hidden"),children:n.map(l=>e.jsx("div",{className:h("hover:bg-purple-light cursor-pointer p-1"),onClick:f=>{f.stopPropagation(),r(l)},children:M(l)},l))})})})]})}const d=new b(v());function L1({setTracks:t,config:n,song:s}){P(()=>d.stop());const a=n.tracks,o=(r,l)=>{t({...a,[r]:l}),d.isPlaying()&&(d.pause(),d.setTrackInstrument(r,l.instrument).then(()=>d.play()))},[i,M]=C.useState(null),u=w(d.state,{store:v()})==="Playing";async function p(r){if(!s)return;const l={...n};l.waiting=!1,await d.setSong(s,l),M(r),Object.keys(s.tracks).forEach(H=>d.setTrackVolume(+H,r===+H?1:0));const f=s.notes.find(H=>H.track===r);f&&(d.seek(f.time),d.play())}function L(){M(null),d.stop()}const V=r=>{u&&i===r?L():p(r)};return e.jsx(e.Fragment,{children:Object.entries(a).map(([r,l])=>{const f=u&&i===+r;return e.jsx(Y,{track:l,trackId:+r,song:s,setTrack:o,noteCount:s?.notes.filter(H=>H.track===+r).length??0,onPlayTrack:V,isPlaying:f,stopPlayer:L},r)})})}function Y({track:t,trackId:n,song:s,setTrack:a,noteCount:o,onPlayTrack:i,isPlaying:M,stopPlayer:x}){const[u,p]=C.useState({error:!1,loading:!1}),L=N(),V=c=>{c.preventDefault(),i(n)},r=()=>{if(s){x();const c=_(s).tracks[n];c&&a(n,c)}},l=c=>{p({error:!1,loading:!0}),L.setTrackInstrument(n,c).then(()=>{p({error:!1,loading:!1}),a(n,{...t,instrument:c})}).catch(()=>{p({error:!0,loading:!1})})},f=c=>{t.hand===c&&(c="none"),a(n,{...t,hand:c})},H=c=>{L.setTrackVolume(n,c?1:0),a(n,{...t,sound:c})};return e.jsxs("span",{className:"m-4 grow rounded-md border border-black bg-white px-3 sm:grow-0",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("span",{style:{},children:["Track ",n+1,t.track.name?": "+t.track.name:""]}),e.jsx("span",{className:"bg-purple-light mx-1 my-2 h-6 w-[2px]"}),e.jsxs("span",{children:[o," Notes"]}),e.jsx(l1,{on:M,onClick:V}),e.jsx(r1,{onClick:r})]}),e.jsx(e1,{value:t.instrument,onSelect:l,error:u.error,loading:u.loading}),e.jsx(t1,{hand:t.hand,sound:t.sound,onSelectHand:f,onToggleSound:H})]})}function e1({value:t,error:n,loading:s,onSelect:a}){return e.jsx(Q,{error:n,loading:s,value:t,onChange:a,options:S,format:Z,display:Z})}function t1({hand:t,sound:n,onSelectHand:s,onToggleSound:a}){const o=i=>{i.stopPropagation(),a(!n)};return e.jsxs("div",{className:"jusitfy-around flex items-center gap-4 p-4",children:[e.jsx(n1,{on:t==="left",onClick:()=>{s("left")}}),e.jsx(s1,{on:t==="right",onClick:()=>{s("right")}}),e.jsx(a1,{on:n,onClick:o})]})}const y={fontSize:"14px",paddingTop:"8px"};function n1({on:t,onClick:n}){return e.jsxs("button",{className:"flex flex-col items-center",children:[e.jsx(z,{height:32,width:32,fill:h(t?"fill-purple-primary":"fill-white hover:fill-purple-hover"),onClick:n}),e.jsx("span",{style:y,children:"Left Hand"})]})}function s1({on:t,onClick:n}){return e.jsxs("button",{className:"flex flex-col items-center",children:[e.jsx(O,{height:32,width:32,fill:h(t?"fill-purple-primary":"fill-white hover:fill-purple-hover"),onClick:n}),e.jsx("span",{style:y,children:"Right Hand"})]})}function a1({on:t,onClick:n}){const s=t?I:W,a=t?"Sound On":"Sound Off";return e.jsxs("button",{className:"flex flex-col items-center",children:[e.jsx(s,{height:32,width:32,className:h("transition",t&&"text-purple-primary"),onClick:n}),e.jsx("span",{style:y,children:a})]})}function l1({on:t,onClick:n}){const s=t?T:R;return e.jsx("button",{className:"mr-6 ml-2 flex flex-col items-center",onClick:a=>{a.preventDefault(),a.stopPropagation(),n(a)},children:e.jsx(s,{height:24,width:24,className:h("hover:fill-purple-primary",t&&"fill-purple-primary")})})}function r1({onClick:t}){return e.jsx("button",{className:"ml-auto flex flex-col items-center",children:e.jsx(B,{height:24,width:24,className:h("transition-transform duration-300 ease-in-out hover:-rotate-45"),onClick:t})})}export{L1 as A,A as C,$ as L,p1 as M,h1 as R,Q as S,W as V,I as a};
